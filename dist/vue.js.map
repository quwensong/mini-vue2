{"version":3,"file":"vue.js","sources":["../src/utils.js","../src/core/observer/array.js","../src/core/observer/dep.js","../src/core/observer/index.js","../src/core/observer/watcher.js","../src/core/instance/state.js","../src/compiler/parser.js","../src/compiler/generate.js","../src/compiler/index.js","../src/core/vdom/patch.js","../src/core/instance/lifecycle.js","../src/core/instance/init.js","../src/core/vdom/index.js","../src/core/instance/render.js","../src/core/instance/index.js"],"sourcesContent":["export function isFunction(target){\r\n  return typeof target === 'function'\r\n}\r\n\r\nexport function isObject(target){\r\n  return typeof target === \"object\" && target !== null\r\n}\r\n\r\nexport function def(target,key,value,enumerable){\r\n  Object.defineProperty(target,key,{\r\n    value: value,\r\n    enumerable:!!enumerable,\r\n    writable:true,\r\n    configurable:true\r\n  })\r\n}","const oldArrProto = Array.prototype\r\nexport const arrayMethods = Object.create(oldArrProto);\r\n// Object.create 使用现有的对象来作为新创建对象的原型\r\nconst methods = [\r\n  'push',\r\n  'unshift',\r\n  'splice',\r\n  'pop',\r\n  'reserve',\r\n  'sort',\r\n  'shift'\r\n]\r\n// configurable:false,//能否使用delete、能否需改属性特性、或能否修改访问器属性、，false为不可重新定义，默认值为true\r\n// enumerable:false,//对象属性是否可通过for-in循环，flase为不可循环，默认值为true\r\n// writable:false,//对象属性是否可修改,flase为不可修改，默认值为true\r\n\r\n// 用户调用的是以上七个方法会用自己重写的，否则就用原来的数组原型上面的方法\r\nmethods.forEach(method =>{\r\n  // NOTE 缓存原始方法\r\n  const original = oldArrProto[method]\r\n  // 代理\r\n  Object.defineProperty(arrayMethods,method,{\r\n    value:function mutator(...args){\r\n      const result = original.call(this,...args)\r\n      const ob = this.__ob__\r\n      let inserted;\r\n      switch(method){\r\n        case 'push':\r\n        case 'unshift':\r\n          inserted = args;\r\n          break;\r\n        case 'splice':\r\n          inserted = args.slice(2)\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      // 如果有新增加的值要继续进行劫持\r\n      if(inserted) ob.observerArray(inserted)\r\n      ob.dep.notify()\r\n      return result\r\n    },\r\n    enumerable:false,\r\n    writable:false,\r\n    configurable:false\r\n  })\r\n    \r\n    \r\n})\r\n\r\n\r\n","// 每个属性都分配一个Dep,watcher中也要存放这个Dep,多对多\r\nlet uid = 0;\r\nclass Dep{\r\n  constructor(){\r\n    this.id = uid++\r\n    this.subs = [];//存放 watcher\r\n  }\r\n  depend(){\r\n    // dep要存放 watcher watcher也要存放 dep\r\n    if(window.target){\r\n      // 把dep传给watcher存储\r\n      window.target.addDep(this);//新增\r\n    }\r\n  }\r\n  addSub(watcher){\r\n    this.subs.push(watcher);\r\n  }\r\n  removeSub(watcher){\r\n    remove(this.subs, watcher);\r\n  }\r\n  notify(){\r\n    const subs = this.subs.slice();\r\n    subs.forEach(watcher => watcher.update())\r\n  }\r\n}\r\n\r\nfunction remove(arr,item){\r\n  if(arr.length){\r\n    const index = arr.indexOf(item)\r\n    if(index > -1){\r\n      return arr.splice(index,1)\r\n    }\r\n  }\r\n}\r\n\r\nexport default Dep;","import { isObject,def } from \"../../utils\"\r\nimport { arrayMethods } from './array'\r\nimport Dep from './dep'\r\n\r\n// NOTE 检查__ob__是否可用\r\nconst hasProto = '__ob__' in {}\r\nconst arrKeys = Object.getOwnPropertyNames(arrayMethods)\r\n\r\n//INFO 观测者类 类有类型，对象没有类型\r\nclass Observer {\r\n  constructor(value) {\r\n    this.value = value,\r\n    this.dep = new Dep()\r\n    def(value,'__ob__',this)\r\n\r\n    // value.__ob__ = this;//所有被劫持的属性都有 __ob__\r\n    // NOTE 2、对value中的数据进行遍历循环 劫持 \r\n    if(Array.isArray(value)){ //数组劫持 \r\n      // 内部对数组不采用 Object.defineProperty\r\n      // 对数组原来的方法进行改写 push shift pop unshift reserve sort splice/ \r\n      // __proto__指向构造函数的原型（prototype）对象 \r\n      const augment = hasProto ? protoAugment : copyAugment\r\n      augment(value,arrayMethods,arrKeys)\r\n\r\n      // TAG 如果数组里面的是对象，则需要劫持对象\r\n      this.observerArray(value)\r\n\r\n    }else{\r\n      this.walk(value) //对象劫持\r\n    }\r\n    \r\n  }\r\n  // 遍历对象\r\n  walk(value) {\r\n    // NOTE 3、遍历对象，响应式劫持\r\n    Object.keys(value).forEach((key)=> defineReactive(value,key,value[key]))\r\n  }\r\n  // 遍历数组\r\n  observerArray(value){\r\n    value.forEach((item)=> observer(item))\r\n  }\r\n\r\n}\r\n\r\nfunction defineReactive(data, key, value) {\r\n  // NOTE 4、value有可能是对象，再进行递归劫持\r\n  const childOb = observer(value)\r\n  // 每个属性都对应一个 dep\r\n  let dep = new Dep()\r\n  Object.defineProperty(data, key,{\r\n    get(){\r\n      // 取值的时候将wtacher和dep关联起来\r\n      // Dep.target\r\n      if(window.target){\r\n        // 收集对象依赖(watcher)\r\n        dep.depend()\r\n        // 收集数组依赖(watcher)\r\n        if(childOb) childOb.dep.depend()\r\n      }\r\n      return value;\r\n    },\r\n    set(newValue){\r\n      // NOTE 5、如果用户赋值一个新的对象需要将这个对象也进行劫持\r\n      // TAG：只有新增加的属性是对象才会进行监听劫持\r\n      if(newValue !== value){\r\n        observer(newValue)\r\n        // (对象触发收集的 watcher )告诉当前的属性存放的wtacher执行get()\r\n        dep.notify()\r\n        value = newValue\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\nfunction protoAugment(target,src,keys){\r\n  target.__ob__ = src\r\n}\r\nfunction copyAugment(target,src,keys){\r\n  for(var i=0;i<keys.length;i++){\r\n    const key = keys[i]\r\n    def(target,key,src[key])\r\n  }\r\n}\r\n\r\nexport function observer(value){\r\n  // NOTE: 1、如果是对象才进行观测\r\n  if(!isObject(value)) return \r\n  // NOTE: 2、如果是响应式的也没必要再进行观测了\r\n\r\n  let ob = null;\r\n  if(value.__ob__ && value.__ob__ instanceof Observer){\r\n    ob = value.__ob__\r\n  }else{\r\n    ob = new Observer(value)\r\n  }\r\n  return ob\r\n}","const bailRE = /[^\\w.$]/\r\n\r\nlet id = 0;\r\nclass Watcher{\r\n  constructor(vm,expOrFn,cb,options){\r\n    // 默认调用一次更新函数\r\n    if(typeof expOrFn === 'function'){\r\n      this.getter = expOrFn\r\n    }else{\r\n      // a.b.c.d就是一个keypath，说明从vm.a.b.c.d中读取数据。\r\n      this.getter = parsePath(expOrFn)\r\n    }\r\n    if(options){\r\n      this.deep = !!options.deep\r\n    }else{\r\n      this.deep = false\r\n    }\r\n    this.vm = vm;\r\n    this.exprOrFn = expOrFn\r\n    this.cb = cb;\r\n    this.options = options;\r\n    this.id = id++\r\n    this.deps = []\r\n    this.depsId = new Set()\r\n    // 默认初始化\r\n    this.value = this.get()\r\n  }\r\n  // 初始化\r\n  get(){\r\n    /**\r\n     * 一定要在window.target =undefined之前去触发子值的收集依赖逻辑，\r\n     * 这样才能保证子集收集的依赖是当前这个Watcher。如果在window.target\r\n     *  =undefined之后去触发收集依赖的逻辑，那么其实当前的Watcher并不会\r\n     * 被收集到子值的依赖列表中，也就无法实现deep的功能。\r\n     * 简单来说就是 父亲和子属性的 dep 都收集了父亲的 watcher\r\n     * 只要有一个变化就会通知watcher更新\r\n     */\r\n    window.target = this\r\n    const value = this.getter.call(this.vm,this.vm)\r\n    if(this.deep){\r\n      traverse(value)\r\n    }\r\n    window.target = undefined;\r\n    return value\r\n  }\r\n  // 更新\r\n  update(){\r\n    queueWatch(this)\r\n  }\r\n  addDep(dep){\r\n    const id = dep.id\r\n    if(!this.depsId.has(id)){\r\n      this.depsId.add(id)\r\n      this.deps.push(dep)\r\n      // dep存储watcher\r\n      dep.addSub(this)\r\n    }\r\n  }\r\n  run(){\r\n    const oldValue = this.value\r\n    this.value = this.get()\r\n    // 监听器实现原理\r\n    this.cb.call(this.vm,oldValue,this.value)\r\n  }\r\n  // 把watcher实例从当前正在观察的状态的依赖列表中移除。\r\n  teardown(){\r\n    /**\r\n     * Watcher中记录自己都订阅了谁，也就是watcher实例被收集进了哪些Dep里。\r\n     * 然后当Watcher不想继续订阅这些Dep时，循环自己记录的订阅列表来通知\r\n     * 它们（Dep）将自己从它们（Dep）的依赖列表中移除掉。\r\n     */\r\n    let i = this.deps.length\r\n    while(i--){\r\n      this.deps[i].removeSub(this)\r\n    }\r\n  }\r\n}\r\nlet queue = []\r\nlet has = {}\r\nfunction queueWatch(watcher){\r\n  const id = watcher.id;\r\n  if(has[id] == null) {\r\n    queue.push(watcher)\r\n    has[id] = true\r\n    setTimeout(()=>{\r\n      queue.forEach(watcher => watcher.run())\r\n      queue = []\r\n      has = {}\r\n    },0)\r\n\r\n  }\r\n}\r\n\r\nfunction parsePath(path){\r\n  // 如果不是这种格式 'a.b.c'是函数的话直接返回\r\n  if(bailRE.test(path)) return path;\r\n  \r\n  const segments = path.split('.')\r\n  return function(obj){\r\n    // 这里的obj就是外面传进来的 this.vm\r\n    // 一直往下取值直到取到最后面一层\r\n    for(let i = 0; i < segments.length; i++){\r\n      if(!obj) return\r\n      obj = obj[segments[i]]\r\n    }\r\n    return obj;\r\n  }\r\n}\r\n  \r\nconst seenObjects = new Set()\r\n\r\nexport function traverse (val) {\r\n  _traverse(val, seenObjects)\r\n  seenObjects.clear()\r\n}\r\n  \r\nfunction _traverse (val, seen) {\r\n  let i, keys\r\n  const isArray = Array.isArray(val)\r\n  if ((!isArray && !isObject(val)) || Object.isFrozen(val)) {\r\n    return\r\n  }\r\n  if (val.__ob__) {\r\n    const depId = val.__ob__.dep.id\r\n    if (seen.has(depId)) {\r\n      return\r\n    }\r\n    seen.add(depId)\r\n  }\r\n  if (isArray) {\r\n    i = val.length\r\n    while (i--) _traverse(val[i], seen)\r\n  } else {\r\n    keys = Object.keys(val)\r\n    i = keys.length\r\n    while (i--) _traverse(val[keys[i]], seen)\r\n  }\r\n}\r\n\r\nexport default Watcher","import { observer } from '../observer/index'\r\nimport { isFunction } from '../../utils'\r\nimport Watcher from '../observer/watcher'\r\n\r\nexport function initState(vm){\r\n  const options = vm.$options\r\n  // NOTE: 1、props 初始化\r\n  if(options.props){\r\n    // initProps()\r\n\r\n  }\r\n  // NOTE: 2、data 初始化\r\n  if(options.data){\r\n    initData(vm)\r\n\r\n  }\r\n  // NOTE: 3、computed 初始化\r\n  if(options.computed){\r\n    // initComputed()\r\n  }\r\n  // NOTE: 4、watch 初始化\r\n  if(options.watch){\r\n      // initWatch()\r\n  }\r\n\r\n\r\n  \r\n}\r\n\r\nfunction proxy(vm,source,key){\r\n  Object.defineProperty(vm,key,{\r\n    get() {\r\n      return vm[source][key]\r\n    },\r\n    set(newValue){\r\n      vm[source][key] = newValue\r\n    }\r\n  })\r\n}\r\n\r\nfunction initData(vm){\r\n  let data = vm.$options.data\r\n  // INFO: Vue2中会将data中所有的数据进行劫持 Object.defineProperty\r\n  if(!isFunction(data)){\r\n  }else{\r\n    // TAG 绑定this 通过_data进行关联\r\n    data = vm._data = data.call(vm)\r\n  }\r\n  // TAG 用户 vm.name 代理--> vm._data.name \r\n  for(let key in data){\r\n    proxy(vm,'_data',key)\r\n  }\r\n  // NOTE: 1、把 data 变成响应式\r\n  observer(data)\r\n} \r\n\r\n\r\n\r\n\r\nexport function stateMixin(Vue) {\r\n  // Vue.js中计算属性（Computed）的实现原理与expOrFn支持函数有很大的关系\r\n\r\n  // Vue.prototype.$set = set\r\n  // Vue.prototype.$delete = del\r\n\r\n  Vue.prototype.$watch = function (expOrFn,cb,options) {\r\n    const vm = this\r\n    options = options || {}\r\n    options.user = true\r\n    const watcher = new Watcher(vm, expOrFn, cb, options)\r\n    // NOTE: 1.代码会判断用户是否使用了immediate参数，如果使用了，则立即执行一次cb。\r\n    if (options.immediate) {\r\n      cb.call(vm,watcher.value)\r\n    }\r\n    return function unwatchFn() {\r\n      watcher.teardown()\r\n    }\r\n  }\r\n}\r\n\r\n\r\n","// Regular Expressions for parsing tags and attributes\r\n// NOTE 标签名\r\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`\r\n// NOTE 标签名捕获 通过正则的分组查找\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`\r\n// NOTE 匹配开始标签\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`)\r\n// NOTE 匹配整个标签的关闭\r\nconst startTagClose = /^\\s*(\\/?)>/\r\n// NOTE 匹配结束标签\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`)\r\n// NOTE 匹配属性\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/\r\nconst dynamicArgAttribute = /^\\s*((?:v-[\\w-]+:|@|:|#)\\[[^=]+\\][^\\s\"'<>\\/=]*)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/\r\nconst doctype = /^<!DOCTYPE [^>]+>/i\r\n// #7298: escape - to avoid being pased as HTML comment when inlined in page\r\nconst comment = /^<!\\--/\r\nconst conditionalComment = /^<!\\[/\r\n// NOTE 匹配 {{ }}\r\nconst defaultTagRe = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\r\n\r\nfunction createAstElement(tagName, attrs){\r\n  return {\r\n    tag:tagName,\r\n    type:1,\r\n    children:[],\r\n    parent:null,\r\n    attrs\r\n  }\r\n}\r\nlet root = null\r\nlet stack = []\r\nfunction start(tagName,attributes){\r\n  let parent = stack[stack.length - 1]\r\n  let element = createAstElement(tagName, attributes)\r\n  if(!root){\r\n    root = element\r\n  }\r\n  element.parent = parent\r\n  if(parent){\r\n    parent.children.push(element)\r\n  }\r\n  stack.push(element)\r\n}\r\nfunction end(tagName){\r\n  let last = stack.pop()\r\n  if(last.tag !==  tagName){\r\n    throw new Error(\"标签有误\")\r\n  }\r\n}\r\nfunction chars(text){\r\n  text = text.replace(/\\s/g,\"\")\r\n  let parent = stack[stack.length - 1]\r\n  if(text){\r\n    parent.children.push({\r\n      type:3,\r\n      text\r\n    })\r\n  }\r\n}\r\nexport function parserHTML(html){\r\n  function advance(len){\r\n    html = html.substring(len)\r\n  }\r\n  function parseStartTag(){\r\n    const start = html.match(startTagOpen)\r\n    if(start){\r\n      const match = {\r\n        tagName: start[1],\r\n        attrs:[]\r\n      }\r\n      advance(start[0].length)\r\n      let end\r\n      let attr\r\n      while(!(end = html.match(startTagClose)) && (attr = html.match(attribute))){\r\n        match.attrs.push({name:attr[1],value:attr[3] || attr[4] || attr[5]})\r\n        advance(attr[0].length)\r\n      }\r\n      if(end){\r\n        advance(end[0].length)\r\n      }\r\n      return match;\r\n    }\r\n    return false;\r\n  }\r\n  // 解析 template 字符串\r\n  while(html){ //看解析的内容是否存在\r\n    let textEnd = html.indexOf('<')\r\n    if(textEnd == 0){\r\n      const startTagMatch = parseStartTag() //解析开始标签\r\n      if(startTagMatch){\r\n        start(startTagMatch.tagName,startTagMatch.attrs,)\r\n        continue\r\n      } \r\n      const endTagMatch = html.match(endTag) //解析结束标签\r\n      if(endTagMatch){\r\n        end(endTagMatch[1])\r\n        advance(endTagMatch[0].length)\r\n        continue\r\n      }\r\n    }\r\n    let text; // 1234</div>\r\n    if(textEnd > 0){\r\n      text = html.substring(0,textEnd)\r\n    }\r\n    if(text){\r\n      chars(text)\r\n      advance(text.length)\r\n    }\r\n  }\r\n  return root\r\n}\r\n","const defaultTagRe = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g //{{ name }}\r\n\r\nfunction genProps(attrs){\r\n  let str = ''\r\n  for (let i = 0; i < attrs.length; i++){\r\n    let attr = attrs[i]\r\n    if(attr.name === 'style'){\r\n      let styleObj = {}\r\n      attr.value.replace(/([^;:]+):([^;:]+)/g,function(){\r\n        styleObj[arguments[1]] = arguments[2]\r\n      })\r\n      attr.value = styleObj\r\n    }\r\n    str += `${attr.name}:${JSON.stringify(attr.value)},`\r\n  }\r\n  return `{${str.slice(0,-1)}}`\r\n}\r\n\r\nfunction gen(el){\r\n  if(el.type == 1){\r\n    return generate(el)\r\n  }else{\r\n    let text = el.text\r\n    // return  `_v(\"${text}\")`\r\n    if(!defaultTagRe.test(text)){\r\n      return  `_v(\"${text}\")`\r\n    }else{\r\n      let tokens = [];\r\n      let match;\r\n      let lastIndex = defaultTagRe.lastIndex = 0;\r\n      while(match = defaultTagRe.exec(text)){\r\n        let index = match.index;//开始索引\r\n        if(index > lastIndex){\r\n          tokens.push(JSON.stringify(text.slice(lastIndex,index)))\r\n        }\r\n        tokens.push(`_s(${match[1].trim()})`)\r\n        lastIndex = index + match[0].length //结束索引\r\n      }\r\n      if(lastIndex < text.length){\r\n        tokens.push(JSON.stringify(text.slice(lastIndex)))\r\n      }\r\n      return `_v(${tokens.join('+')})`\r\n    }\r\n  }\r\n}\r\n\r\nfunction genChildren(el){\r\n  let children = el.children\r\n  if(children){\r\n    return children.map(c => gen(c)).join(',')\r\n  }\r\n  return false\r\n\r\n}\r\n\r\nexport function generate(el){\r\n  // 遍历树，将树拼接为字符串\r\n  let children = genChildren(el)\r\n  let code = `_c(\"${el.tag}\",${el.attrs.length ? genProps(el.attrs) : 'undefined'\r\n  }${children? `,${children}`:''})`;\r\n  return code\r\n}","import { parserHTML } from './parser';\r\nimport { generate } from './generate';\r\n\r\n\r\nexport function compileToFunction(template){\r\n  // TAG html -> ast -> render -> vnode -> 真实dom\r\n  // NOTE 1、html -> ast\r\n  let root = parserHTML(template)\r\n  // NOTE 2、ast -> render\r\n  let code = generate(root);\r\n  // _c(\"div\",),_v(\"hhha\"+_s(name)+\"hello\"),_c(\"span\",{class:\"span\"}),_v(\"hello\")))\r\n  //模板引擎靠的是 new Function + with\r\n  let render = new Function(`with(this){return ${code}}`);\r\n  // 谁调用的render，this就指向谁\r\n  return render\r\n}","export function patch(oldVnode,vnode){\r\n  // NOTE 1、真实dom节点\r\n  let el = null\r\n  const isRealElement = oldVnode.nodeType\r\n  if(isRealElement){\r\n    const oldElm = oldVnode\r\n    // 先把新的虚拟dom创建为真的dom元素，插入到和当前同一层级，再把原来的自己删掉\r\n    const parentElm = oldVnode.parentNode\r\n\r\n    const elm = createElm(vnode)\r\n    el = parentElm.insertBefore(elm, oldVnode.nextSibling)\r\n    // insertBefore() 方法在您指定的已有子节点之前插入新的子节点。\r\n    parentElm.removeChild(oldElm)\r\n    \r\n  }\r\n  return el\r\n}\r\n\r\nfunction createElm(vnode){\r\n  const {tag,attrs,children,text,vm} = vnode\r\n  // 普通元素\r\n  if(typeof tag === \"string\"){\r\n    vnode.el = document.createElement(tag)\r\n    updateProperties(vnode)\r\n    children.forEach(child => {//递归创建儿子节点\r\n      vnode.el.appendChild(createElm(child))\r\n    });\r\n  }else{\r\n    vnode.el = document.createTextNode(text)\r\n  }\r\n  return vnode.el\r\n}\r\n\r\n// 更新属性\r\nfunction updateProperties(vnode){\r\n  const newProps = vnode.data || {};\r\n  const el = vnode.el;\r\n}","import { patch } from '../../core/vdom/patch'\r\nimport Watcher from '../../core/observer/watcher'\r\n\r\nexport function lifecycleMixin(Vue){\r\n  Vue.prototype._update = function(vnode){\r\n    const vm = this;\r\n    // INFO 初始化 + 更新\r\n    // 用虚拟节点创建真实节点替换掉 $el\r\n    vm.$el = patch(vm.$el,vnode)\r\n  }\r\n}\r\n\r\nexport function mountComponent(vm,el){\r\n  const options = vm.$options\r\n  vm.$el = el;\r\n  \r\n  const updateComponent = () => {\r\n    // NOTE 1.调用render函数，生成虚拟dom\r\n    // NOTE 2.用虚拟dom 生成真实dom\r\n    vm._update(vm._render())\r\n\r\n  }\r\n\r\n  new Watcher(vm, updateComponent,()=>{},true)\r\n}","import { initState } from \"./state\"\r\nimport { compileToFunction } from '../../compiler/index'\r\nimport { mountComponent } from \"./lifecycle\"\r\n\r\nexport function initMixin(Vue){\r\n  Vue.prototype._init = function(options){\r\n    //TAG：this和vm保存的是同一个对象的地址，所以vm上面增加内容了，对应的Vue\r\n    //TAG：实例对象也会增加\r\n    const vm = this\r\n    vm.$options = options\r\n\r\n    //NOTE：1、对数据进行初始化\r\n    initState(vm)\r\n    //NOTE: 2、编译挂载\r\n\r\n    if(vm.$options.el){\r\n      // 将数据挂载到这个模板上面\r\n      vm.$mount(vm.$options.el)\r\n    }\r\n  }\r\n\r\n  Vue.prototype.$mount = function(el){\r\n    const vm = this;\r\n    const options = vm.$options\r\n    el = typeof el === 'string' ? document.querySelector(el) : el\r\n    vm.$el = el\r\n    \r\n    // 如果用户没有传入render函数\r\n    if(!options.render){\r\n      let template =  options.template \r\n      // 没有传 template且 el 存在\r\n      if(!template && el){\r\n        // 取最外层的那个 dom 字符串 outerHTML\r\n        template = el.outerHTML\r\n        // 把模板变成 render 函数\r\n        const render = compileToFunction(template)\r\n        options.render = render\r\n      }\r\n    }\r\n    // 调用 render方法渲染为真正的dom替换页面的内容\r\n    //NOTE 组件的第一次挂载\r\n    mountComponent(vm,el) \r\n  }\r\n}\r\n/**\r\n * <div id=\"d\">\r\n    <p>Content</p>\r\n    <p>Further Elaborated</p>\r\n  </div>  \r\n  字符串 '<div id=\"d\"><p>Content</p><p>Further Elaborated</p></div>'\r\n */\r\n\r\n","export function createElement(vm,tag,attrs,...children){\r\n  return vnode(vm,tag,attrs,attrs.key,children,undefined)\r\n}\r\n\r\nexport function createTextElement(vm,text){\r\n  return vnode(vm,undefined,undefined,undefined,undefined,text)\r\n}\r\n\r\nfunction vnode(vm,tag,attrs,key,children,text){\r\n  return {\r\n    vm,\r\n    tag,\r\n    attrs,\r\n    key,\r\n    children,\r\n    text\r\n    // ...\r\n  }\r\n}","import { createElement,createTextElement } from \"../vdom/index\"\r\n\r\nexport function renderMixin(Vue){\r\n  // 创建普通dom\r\n  Vue.prototype._c = function(tag,attrs,...children){\r\n    return createElement(this,tag,attrs,...children)\r\n  }\r\n  // 创建文本dom\r\n  Vue.prototype._v = function(text){\r\n    return createTextElement(this,text)\r\n  }\r\n  // JSON\r\n  Vue.prototype._s = function(val){\r\n    if(typeof val === \"object\") return JSON.stringify(val)    \r\n    return val\r\n  }\r\n  Vue.prototype._render = function(){\r\n    const vm = this\r\n\r\n    const { render } = vm.$options\r\n    const vnode = render.call(vm)\r\n    return vnode\r\n  }\r\n}","import { initMixin } from './init'\r\nimport { stateMixin } from './state'\r\nimport { renderMixin } from './render'\r\nimport { lifecycleMixin } from './lifecycle'\r\n\r\n//NOTE: options 为用户传入的配置项\r\nfunction Vue(options){\r\n\r\n  this._init(options)\r\n\r\n}\r\n\r\ninitMixin(Vue)\r\nstateMixin(Vue)\r\nrenderMixin(Vue)\r\nlifecycleMixin(Vue)\r\n\r\nexport default Vue"],"names":["isFunction","target","isObject","def","key","value","enumerable","Object","defineProperty","writable","configurable","oldArrProto","Array","prototype","arrayMethods","create","methods","forEach","method","original","mutator","args","result","call","ob","__ob__","inserted","slice","observerArray","dep","notify","uid","Dep","id","subs","window","addDep","watcher","push","remove","update","arr","item","length","index","indexOf","splice","hasProto","arrKeys","getOwnPropertyNames","Observer","isArray","augment","protoAugment","copyAugment","walk","keys","defineReactive","observer","data","childOb","get","depend","set","newValue","src","i","bailRE","Watcher","vm","expOrFn","cb","options","getter","parsePath","deep","exprOrFn","deps","depsId","Set","traverse","undefined","queueWatch","has","add","addSub","oldValue","removeSub","queue","setTimeout","run","path","test","segments","split","obj","seenObjects","val","_traverse","clear","seen","isFrozen","depId","initState","$options","props","initData","computed","watch","proxy","source","_data","stateMixin","Vue","$watch","user","immediate","unwatchFn","teardown","ncname","qnameCapture","startTagOpen","RegExp","startTagClose","endTag","attribute","createAstElement","tagName","attrs","tag","type","children","parent","root","stack","start","attributes","element","end","last","pop","Error","chars","text","replace","parserHTML","html","advance","len","substring","parseStartTag","match","attr","name","textEnd","startTagMatch","endTagMatch","defaultTagRe","genProps","str","styleObj","arguments","JSON","stringify","gen","el","generate","tokens","lastIndex","exec","trim","join","genChildren","map","c","code","compileToFunction","template","render","Function","patch","oldVnode","vnode","isRealElement","nodeType","oldElm","parentElm","parentNode","elm","createElm","insertBefore","nextSibling","removeChild","document","createElement","updateProperties","child","appendChild","createTextNode","lifecycleMixin","_update","$el","mountComponent","updateComponent","_render","initMixin","_init","$mount","querySelector","outerHTML","createTextElement","renderMixin","_c","_v","_s"],"mappings":"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"}