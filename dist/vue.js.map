{"version":3,"file":"vue.js","sources":["../src/utils.js","../src/observer/array.js","../src/observer/dep.js","../src/observer/index.js","../src/state.js","../src/compiler/parser.js","../src/compiler/generate.js","../src/compiler/index.js","../src/vdom/patch.js","../src/observer/watcher.js","../src/lifecycle.js","../src/init.js","../src/vdom/index.js","../src/render.js","../src/index.js"],"sourcesContent":["export function isFunction(obj){\r\n  return typeof obj === 'function'\r\n}\r\n\r\nexport function isObject(obj){\r\n  return typeof obj === \"object\" && obj !== null\r\n}","const oldArrayPrototype = Array.prototype\r\nexport const arrayMethods = Object.create(Array.prototype);\r\n// Object.create 使用现有的对象来作为新创建对象的原型\r\nlet methods = [\r\n  'push',\r\n  'unshift',\r\n  'splice',\r\n  'pop',\r\n  'reserve',\r\n  'sort',\r\n  'shift'\r\n]\r\n// 用户调用的是以上七个方法会用自己重写的，否则就用原来的数组原型上面的方法\r\nmethods.forEach(method =>{\r\n  arrayMethods[method] = function(...args){\r\n    console.log('数组发生变化')\r\n    // oldArrayPrototype[method].apply(this,args)\r\n    oldArrayPrototype[method].call(this,...args)\r\n    let inserted;\r\n    let ob = this.__ob__;\r\n    switch(method){\r\n      case 'push':\r\n      case 'unshift':\r\n        inserted = args;\r\n          \r\n        break;\r\n      case 'splice':\r\n        inserted = args.slice(2)\r\n        break;\r\n      \r\n      default:\r\n        break;\r\n    }\r\n    // 如果有新增加的值要继续进行劫持\r\n    if(inserted) ob.observerArray(inserted)\r\n    \r\n  }\r\n})\r\n\r\n\r\n","// 每个属性都分配一个Dep,watcher中也要存放这个Dep,多对多\r\nlet id = 0;\r\nclass Dep{\r\n  constructor(){\r\n    this.id = id++\r\n    this.subs = [];//存放 watcher\r\n  }\r\n  depend(){\r\n    // dep要存放 watcher watcher也要存放 dep\r\n    if(Dep.target){\r\n      // 把dep传给watcher存储\r\n      Dep.target.addDep(this);\r\n    }\r\n  }\r\n  addSub(watcher){\r\n    this.subs.push(watcher);\r\n  }\r\n  notify(){\r\n    this.subs.forEach((watcher)=> watcher.update())\r\n  }\r\n}\r\n\r\nDep.target = null\r\n\r\nexport function pushTarget(watcher){\r\n  Dep.target = watcher\r\n}\r\n\r\nexport function popTarget(watcher){\r\n  Dep.target = null\r\n}\r\n\r\nexport default Dep;","import { isObject } from \"../utils\"\r\nimport { arrayMethods } from './array'\r\nimport Dep,{ pushTarget,popTarget}from './dep'\r\n\r\n//INFO 观测者类 类有类型，对象没有类型\r\nclass Observer {\r\n  constructor(data) {\r\n    Object.defineProperty(data,'__ob__',{\r\n      value:this,\r\n      enumerable:false\r\n    })\r\n    // data.__ob__ = this;//所有被劫持的属性都有 __ob__\r\n    // NOTE 2、对data中的数据进行遍历循环 劫持 \r\n    if(Array.isArray(data)){ //数组劫持 \r\n      // 内部对数组不采用 Object.defineProperty\r\n      // 对数组原来的方法进行改写 push shift pop unshift reserve sort splice/ \r\n      // __proto__指向构造函数的原型（prototype）对象 \r\n      data._proto_ = arrayMethods\r\n      // TAG 如果数组里面的是对象，则需要劫持对象\r\n      this.observerArray(data)\r\n\r\n    }else{\r\n      this.walk(data) //对象劫持\r\n    }\r\n    \r\n  }\r\n  // 遍历对象\r\n  walk(data) {\r\n    // NOTE 3、遍历对象，响应式劫持\r\n    Object.keys(data).forEach((key)=> defineReactive(data,key,data[key]))\r\n  }\r\n  // 遍历数组\r\n  observerArray(data){\r\n    data.forEach((item)=> observer(item))\r\n  }\r\n\r\n}\r\n\r\nfunction defineReactive(data, key, value) {\r\n  // NOTE 4、value有可能是对象，再进行递归劫持\r\n  observer(value)\r\n  // 每个属性都对应一个 dep\r\n  let dep = new Dep()\r\n  Object.defineProperty(data, key,{\r\n    get(){\r\n      // 取值的时候将wtacher和dep关联起来\r\n      // Dep.target\r\n      if(Dep.target){\r\n        dep.depend()\r\n      }\r\n      return value;\r\n    },\r\n    set(newValue){\r\n      // NOTE 5、如果用户赋值一个新的对象需要将这个对象也进行劫持\r\n      // TAG：只有新增加的属性是对象才会进行监听劫持\r\n      if(newValue !== value){\r\n        observer(newValue)\r\n        value = newValue\r\n        // 告诉当前的属性存放的wtacher执行get()\r\n        dep.notify()\r\n      }\r\n\r\n    }\r\n  })\r\n}\r\n\r\nexport function observer(data){\r\n  // NOTE: 1、如果是对象才进行观测\r\n  if(!isObject(data)){\r\n    return \r\n  }\r\n  if(data.__ob__){\r\n    return\r\n  }\r\n  new Observer(data)\r\n}","import { observer } from './observer/index'\r\nimport { isFunction } from './utils'\r\n\r\nexport function initState(vm){\r\n// console.log(\"🚀 ~ file: state.js ~ line 2 ~ initState ~ vm\", vm)\r\n  const options = vm.$options\r\n  // NOTE: 1、props 初始化\r\n  if(options.props){\r\n    // initProps()\r\n\r\n  }\r\n  // NOTE: 2、data 初始化\r\n  if(options.data){\r\n    initData(vm)\r\n\r\n  }\r\n  // NOTE: 3、computed 初始化\r\n  if(options.computed){\r\n    // initComputed()\r\n  }\r\n  // NOTE: 4、watch 初始化\r\n  if(options.watch){\r\n      // initWatch()\r\n  }\r\n}\r\n\r\nfunction proxy(vm,source,key){\r\n  Object.defineProperty(vm,key,{\r\n    get() {\r\n      return vm[source][key]\r\n    },\r\n    set(newValue){\r\n      vm[source][key] = newValue\r\n    }\r\n  })\r\n}\r\n\r\nfunction initData(vm){\r\n  let data = vm.$options.data\r\n  // INFO: Vue2中会将data中所有的数据进行劫持 Object.defineProperty\r\n  // console.log(data)\r\n  if(!isFunction(data)){\r\n    console.error('data must be a function')\r\n  }else{\r\n    // TAG 绑定this 通过_data进行关联\r\n    data = vm._data = data.call(vm)\r\n  }\r\n  // TAG 用户 vm.name 代理--> vm._data.name \r\n  for(let key in data){\r\n    proxy(vm,'_data',key)\r\n  }\r\n  // NOTE: 1、把 data 变成响应式\r\n  observer(data)\r\n} ","// Regular Expressions for parsing tags and attributes\r\n// NOTE 标签名\r\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`\r\n// NOTE 标签名捕获 通过正则的分组查找\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`\r\n// NOTE 匹配开始标签\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`)\r\n// NOTE 匹配整个标签的关闭\r\nconst startTagClose = /^\\s*(\\/?)>/\r\n// NOTE 匹配结束标签\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`)\r\n// NOTE 匹配属性\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/\r\nconst dynamicArgAttribute = /^\\s*((?:v-[\\w-]+:|@|:|#)\\[[^=]+\\][^\\s\"'<>\\/=]*)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/\r\nconst doctype = /^<!DOCTYPE [^>]+>/i\r\n// #7298: escape - to avoid being pased as HTML comment when inlined in page\r\nconst comment = /^<!\\--/\r\nconst conditionalComment = /^<!\\[/\r\n// NOTE 匹配 {{ }}\r\nconst defaultTagRe = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\r\n\r\nfunction createAstElement(tagName, attrs){\r\n  return {\r\n    tag:tagName,\r\n    type:1,\r\n    children:[],\r\n    parent:null,\r\n    attrs\r\n  }\r\n}\r\nlet root = null\r\nlet stack = []\r\nfunction start(tagName,attributes){\r\n  let parent = stack[stack.length - 1]\r\n  let element = createAstElement(tagName, attributes)\r\n  if(!root){\r\n    root = element\r\n  }\r\n  element.parent = parent\r\n  if(parent){\r\n    parent.children.push(element)\r\n  }\r\n  stack.push(element)\r\n}\r\nfunction end(tagName){\r\n  let last = stack.pop()\r\n  if(last.tag !==  tagName){\r\n    throw new Error(\"标签有误\")\r\n  }\r\n}\r\nfunction chars(text){\r\n  text = text.replace(/\\s/g,\"\")\r\n  let parent = stack[stack.length - 1]\r\n  if(text){\r\n    parent.children.push({\r\n      type:3,\r\n      text\r\n    })\r\n  }\r\n}\r\nexport function parserHTML(html){\r\n  function advance(len){\r\n    html = html.substring(len)\r\n  }\r\n  function parseStartTag(){\r\n    const start = html.match(startTagOpen)\r\n    if(start){\r\n      const match = {\r\n        tagName: start[1],\r\n        attrs:[]\r\n      }\r\n      advance(start[0].length)\r\n      let end\r\n      let attr\r\n      while(!(end = html.match(startTagClose)) && (attr = html.match(attribute))){\r\n        match.attrs.push({name:attr[1],value:attr[3] || attr[4] || attr[5]})\r\n        advance(attr[0].length)\r\n      }\r\n      if(end){\r\n        advance(end[0].length)\r\n      }\r\n      return match;\r\n    }\r\n    return false;\r\n  }\r\n  // 解析 template 字符串\r\n  while(html){ //看解析的内容是否存在\r\n    let textEnd = html.indexOf('<')\r\n    if(textEnd == 0){\r\n      const startTagMatch = parseStartTag() //解析开始标签\r\n      if(startTagMatch){\r\n        start(startTagMatch.tagName,startTagMatch.attrs,)\r\n        continue\r\n      } \r\n      const endTagMatch = html.match(endTag) //解析结束标签\r\n      if(endTagMatch){\r\n        end(endTagMatch[1])\r\n        advance(endTagMatch[0].length)\r\n        continue\r\n      }\r\n    }\r\n    let text; // 1234</div>\r\n    if(textEnd > 0){\r\n      text = html.substring(0,textEnd)\r\n    }\r\n    if(text){\r\n      chars(text)\r\n      advance(text.length)\r\n    }\r\n  }\r\n  return root\r\n}\r\n","const defaultTagRe = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g //{{ name }}\r\n\r\nfunction genProps(attrs){\r\n  let str = ''\r\n  for (let i = 0; i < attrs.length; i++){\r\n    let attr = attrs[i]\r\n    if(attr.name === 'style'){\r\n      let styleObj = {}\r\n      attr.value.replace(/([^;:]+):([^;:]+)/g,function(){\r\n        styleObj[arguments[1]] = arguments[2]\r\n      })\r\n      attr.value = styleObj\r\n    }\r\n    str += `${attr.name}:${JSON.stringify(attr.value)},`\r\n  }\r\n  return `{${str.slice(0,-1)}}`\r\n}\r\n\r\nfunction gen(el){\r\n  if(el.type == 1){\r\n    return generate(el)\r\n  }else{\r\n    let text = el.text\r\n    // return  `_v(\"${text}\")`\r\n    if(!defaultTagRe.test(text)){\r\n      return  `_v(\"${text}\")`\r\n    }else{\r\n      let tokens = [];\r\n      let match;\r\n      let lastIndex = defaultTagRe.lastIndex = 0;\r\n      while(match = defaultTagRe.exec(text)){\r\n        let index = match.index;//开始索引\r\n        if(index > lastIndex){\r\n          tokens.push(JSON.stringify(text.slice(lastIndex,index)))\r\n        }\r\n        tokens.push(`_s(${match[1].trim()})`)\r\n        lastIndex = index + match[0].length //结束索引\r\n      }\r\n      if(lastIndex < text.length){\r\n        tokens.push(JSON.stringify(text.slice(lastIndex)))\r\n      }\r\n      return `_v(${tokens.join('+')})`\r\n    }\r\n  }\r\n}\r\n\r\nfunction genChildren(el){\r\n  let children = el.children\r\n  if(children){\r\n    return children.map(c => gen(c)).join(',')\r\n  }\r\n  return false\r\n\r\n}\r\n\r\nexport function generate(el){\r\n  // 遍历树，将树拼接为字符串\r\n  let children = genChildren(el)\r\n  let code = `_c(\"${el.tag}\",${el.attrs.length ? genProps(el.attrs) : 'undefined'\r\n  }${children? `,${children}`:''})`;\r\n  return code\r\n}","import { parserHTML } from './parser';\r\nimport { generate } from './generate';\r\n\r\n\r\nexport function compileToFunction(template){\r\n  // TAG html -> ast -> render -> vnode -> 真实dom\r\n  // NOTE 1、html -> ast\r\n  let root = parserHTML(template)\r\n  // NOTE 2、ast -> render\r\n  let code = generate(root);\r\n  // _c(\"div\",),_v(\"hhha\"+_s(name)+\"hello\"),_c(\"span\",{class:\"span\"}),_v(\"hello\")))\r\n  //模板引擎靠的是 new Function + with\r\n  let render = new Function(`with(this){return ${code}}`);\r\n  // 谁调用的render，this就指向谁\r\n  return render\r\n}","export function patch(oldVnode,vnode){\r\n  // NOTE 1、真实dom节点\r\n  \r\n  if(oldVnode.nodeType == 1){\r\n    // 先把新的虚拟dom创建为真的dom元素，插入到和当前同一层级，再把原来的自己删掉\r\n    const parentElm = oldVnode.parentNode\r\n    console.log(\"🚀 \", oldVnode)\r\n\r\n    let elm = createElm(vnode)\r\n    parentElm.appendChild(elm, oldVnode.nextSibling)\r\n\r\n    parentElm.removeChild(oldVnode)\r\n    \r\n  }\r\n}\r\n\r\nfunction createElm(vnode){\r\n  const {tag,attrs,children,text,vm} = vnode\r\n  // 普通元素\r\n  if(typeof tag === \"string\"){\r\n    vnode.el = document.createElement(tag)\r\n    children.forEach(child => {\r\n      vnode.el.appendChild(createElm(child))\r\n    });\r\n  }else{\r\n    vnode.el = document.createTextNode(text)\r\n  }\r\n  return vnode.el\r\n}","import { pushTarget,popTarget} from './dep'\r\n\r\nlet id = 0;\r\nclass Watcher{\r\n  constructor(vm,updateComponent,cb,options){\r\n    this.vm = vm;\r\n    this.exprOrFn = updateComponent\r\n    this.cb = cb;\r\n    this.options = options;\r\n    this.id = id++\r\n    // 默认调用一次更新函数\r\n    this.getter = updateComponent\r\n    this.deps = []\r\n    this.depsId = new Set()\r\n    // 默认初始化\r\n    this.get()\r\n  }\r\n\r\n  get(){\r\n\r\n    pushTarget(this)\r\n    this.getter()\r\n    popTarget()\r\n  }\r\n  update(){\r\n    this.get()\r\n  }\r\n  addDep(dep){\r\n    let id = dep.id\r\n    if(!this.depsId.has(id)){\r\n      this.depsId.add(id)\r\n      this.deps.push(dep)\r\n      // dep存储watcher\r\n      dep.addSub(this)\r\n    }\r\n  }\r\n}\r\n\r\nexport default Watcher","import { patch } from './vdom/patch'\r\nimport Watcher from './observer/watcher'\r\n\r\nexport function lifecycleMixin(Vue){\r\n  Vue.prototype._update = function(vnode){\r\n    const vm = this;\r\n    // INFO 初始化 + 更新\r\n    // console.log(vm.$el,vnode)\r\n    patch(vm.$el,vnode)\r\n  }\r\n}\r\n\r\nexport function mountComponent(vm,el){\r\n  \r\n  const updateComponent = () => {\r\n    // NOTE 1.调用render函数，生成虚拟dom\r\n    // NOTE 2.用虚拟dom 生成真实dom\r\n    vm._update(vm._render())\r\n\r\n  }\r\n  // updateComponent()\r\n\r\n  new Watcher(vm, updateComponent,()=>{},true)\r\n}","import { initState } from \"./state\"\r\nimport { compileToFunction } from './compiler/index'\r\nimport { mountComponent } from \"./lifecycle\"\r\n\r\nexport function initMixin(Vue){\r\n  Vue.prototype._init = function(options){\r\n    //TAG：this和vm保存的是同一个对象的地址，所以vm上面增加内容了，对应的Vue\r\n    //TAG：实例对象也会增加\r\n    const vm = this\r\n    vm.$options = options\r\n\r\n    //NOTE：1、对数据进行初始化\r\n    initState(vm)\r\n    //NOTE: 2、编译挂载\r\n\r\n    if(vm.$options.el){\r\n      // 将数据挂载到这个模板上面\r\n      vm.$mount(vm.$options.el)\r\n    }\r\n  }\r\n\r\n  Vue.prototype.$mount = function(el){\r\n    const vm = this;\r\n    const options = vm.$options\r\n    el = typeof el === 'string' ? document.querySelector(el) : el\r\n    vm.$el = el\r\n    \r\n    // 如果用户没有传入render函数\r\n    if(!options.render){\r\n      let template =  options.template \r\n      // 没有传 template且 el 存在\r\n      if(!template && el){\r\n        // 取最外层的那个 dom 字符串 outerHTML\r\n        template = el.outerHTML\r\n        // 把模板变成 render 函数\r\n        const render = compileToFunction(template)\r\n        // console.log(render)\r\n        options.render = render\r\n      }\r\n    }\r\n    // 调用 render方法渲染为真正的dom替换页面的内容\r\n    //NOTE 组件的第一次挂载\r\n    mountComponent(vm,el) \r\n  }\r\n}\r\n/**\r\n * <div id=\"d\">\r\n    <p>Content</p>\r\n    <p>Further Elaborated</p>\r\n  </div>  \r\n  console.log(d.outerHTML);\r\n  字符串 '<div id=\"d\"><p>Content</p><p>Further Elaborated</p></div>'\r\n */\r\n\r\n","export function createElement(vm,tag,attrs,...children){\r\n  return vnode(vm,tag,attrs,attrs.key,children,undefined)\r\n}\r\n\r\nexport function createTextElement(vm,text){\r\n  return vnode(vm,undefined,undefined,undefined,undefined,text)\r\n}\r\n\r\nfunction vnode(vm,tag,attrs,key,children,text){\r\n  return {\r\n    vm,\r\n    tag,\r\n    attrs,\r\n    key,\r\n    children,\r\n    text\r\n    // ...\r\n  }\r\n}","import { createElement,createTextElement } from \"./vdom/index\"\r\n\r\nexport function renderMixin(Vue){\r\n  // 创建普通dom\r\n  Vue.prototype._c = function(tag,attrs,...children){\r\n    return createElement(this,...arguments)\r\n  }\r\n  // 创建文本dom\r\n  Vue.prototype._v = function(text){\r\n    return createTextElement(this,text)\r\n  }\r\n  // JSON\r\n  Vue.prototype._s = function(val){\r\n    if(typeof val === \"object\") return JSON.stringify(val)    \r\n    return val\r\n  }\r\n  Vue.prototype._render = function(){\r\n    const vm = this\r\n\r\n    const render = vm.$options.render\r\n    const vnode = render.call(vm)\r\n\r\n    return vnode\r\n  }\r\n}","import { initMixin } from './init'\r\nimport { renderMixin } from './render'\r\nimport { lifecycleMixin } from './lifecycle'\r\n\r\n//NOTE: options 为用户传入的配置项\r\nfunction Vue(options){\r\n\r\n  this._init(options)\r\n\r\n}\r\n\r\ninitMixin(Vue)\r\nrenderMixin(Vue)\r\nlifecycleMixin(Vue)\r\n\r\nexport default Vue"],"names":["isFunction","obj","isObject","oldArrayPrototype","Array","prototype","arrayMethods","Object","create","methods","forEach","method","console","log","args","call","inserted","ob","__ob__","slice","observerArray","id","Dep","subs","target","addDep","watcher","push","update","pushTarget","popTarget","Observer","data","defineProperty","value","enumerable","isArray","_proto_","walk","keys","key","defineReactive","item","observer","dep","get","depend","set","newValue","notify","initState","vm","options","$options","props","initData","computed","watch","proxy","source","error","_data","ncname","qnameCapture","startTagOpen","RegExp","startTagClose","endTag","attribute","createAstElement","tagName","attrs","tag","type","children","parent","root","stack","start","attributes","length","element","end","last","pop","Error","chars","text","replace","parserHTML","html","advance","len","substring","parseStartTag","match","attr","name","textEnd","indexOf","startTagMatch","endTagMatch","defaultTagRe","genProps","str","i","styleObj","arguments","JSON","stringify","gen","el","generate","test","tokens","lastIndex","exec","index","trim","join","genChildren","map","c","code","compileToFunction","template","render","Function","patch","oldVnode","vnode","nodeType","parentElm","parentNode","elm","createElm","appendChild","nextSibling","removeChild","document","createElement","child","createTextNode","Watcher","updateComponent","cb","exprOrFn","getter","deps","depsId","Set","has","add","addSub","lifecycleMixin","Vue","_update","$el","mountComponent","_render","initMixin","_init","$mount","querySelector","outerHTML","undefined","createTextElement","renderMixin","_c","_v","_s","val"],"mappings":"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"}